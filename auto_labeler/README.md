# PCB 自動標記程式 - 優化版

## 📁 目錄結構

```
auto_labeler/
├── auto_labeler.py     # 主程式
├── weights/            # 模型權重檔案
│   └── yolov8_pcb_best.pt
└── data/              # 資料目錄（已移入auto_labeler內）
    ├── original/      # 原始圖片
    ├── labeled/       # 人工標記資料
    │   └── classes.txt
    └── auto_labeled/  # 自動標記結果
```

## 🚀 主要改進

### 1. 路徑優化
- 將 `data` 資料夾移入 `auto_labeler` 目錄內
- 簡化路徑配置，所有路徑相對於程式檔案
- 更清晰的目錄結構

### 2. 程式碼重構
- 完全重寫，從 856 行精簡為 556 行
- 更好的函數組織和命名
- 移除不必要的功能和重複代碼
- 改善錯誤處理

### 3. 功能優化
- 移除圖片繪製和儲存功能
- 專注於產生 YOLO 格式的 txt 檔案
- 簡化設定選項
- 更快的執行速度

### 4. 使用者體驗
- 更簡潔的選單系統
- 清晰的進度顯示
- 更好的錯誤訊息

## 📋 功能特色

### ✅ 保留功能
- YOLO 模型訓練
- 自動物件偵測和標記
- YOLO 格式 txt 檔案輸出
- 權重檔案管理
- 暫存檔案自動清理

### ❌ 移除功能
- 圖片視覺化和繪製
- 訓練結果圖表儲存
- 標記後圖片儲存
- 複雜的設定選項

## 🔧 使用方式

1. **執行程式**
   ```bash
   python auto_labeler.py
   ```

2. **選單選項**
   - `1` - 訓練模型
   - `2` - 自動標記
   - `3` - 訓練並標記
   - `4` - 資料統計
   - `5` - 設定選項
   - `6` - 退出

3. **設定選項**
   - 權重檔案儲存：控制是否保存訓練權重
   - 自動標記txt：控制是否輸出標記檔案
   - 暫存清理：控制是否清理臨時檔案

## ⚙️ 預設配置

```python
EXECUTION_CONFIG = {
    'SAVE_WEIGHTS': True,       # 儲存權重檔案
    'SAVE_AUTO_LABELS': True,   # 儲存自動標記txt檔案
    'CLEANUP_TEMP': True,       # 清理暫存檔案
}
```

## 📊 輸出檔案

### 會產生的檔案
- `weights/yolov8_pcb_best.pt` - 訓練完成的模型權重
- `data/auto_labeled/*.txt` - 自動標記結果（YOLO格式）

### 不會產生的檔案
- 訓練過程圖表（confusion matrix, loss curves）
- 標記後的圖片檔案
- 訓練記錄CSV檔案
- 任何暫存檔案

## 🎯 效能提升

- **執行速度更快** - 移除圖片處理步驟
- **磁碟空間節省** - 不產生不必要檔案
- **記憶體使用更少** - 優化資料處理流程
- **程式碼更簡潔** - 易於維護和修改

## 📝 注意事項

1. 確保 `data/labeled/classes.txt` 檔案存在
2. 原始圖片放在 `data/original/` 目錄
3. 人工標記檔案放在 `data/labeled/` 目錄
4. 程式會自動建立缺少的目錄
5. 首次執行會自動下載預訓練模型

## 🔄 從舊版本遷移

如果您使用舊版本，請：

1. 將原本的 `data` 資料夾移動到 `auto_labeler` 目錄內
2. 使用新的 `auto_labeler.py` 檔案
3. 檢查 `data/labeled/classes.txt` 是否存在
4. 重新執行程式

新版本會自動適應新的目錄結構！